{"version":3,"sources":["webpack:///./src/views/Login.vue?f785","webpack:///./src/views/Login.vue","webpack:///./src/services/LoginService.js","webpack:///./src/views/Login.vue?f1df"],"names":["class","for","errors","loginError","emailError","type","placeholder","email","passwordError","min-length","password","value","login","to","url","process","credentials","console","log","axios","post","res","localStorage","setItem","JSON","stringify","data","user","name","methods","validate","LoginService","then","parse","getItem","role","toLowerCase","$router","push","catch","err","this","created","render","__scopeId"],"mappings":"2IAAA,W,sICCOA,MAAM,S,GACJA,MAAM,a,GACJA,MAAM,uB,EACT,eAEK,MAFDA,MAAM,mBAAkB,aAE5B,G,EACA,eAGI,KAHDA,MAAM,QAAM,CACb,eAA2B,KAAxBA,MAAM,gB,eAAkB,8B,MAGvBA,MAAM,Q,SAELA,MAAM,oB,GAINA,MAAM,c,GACFA,MAAM,gBAAgBC,IAAI,S,iBAC9B,U,SAC8BD,MAAM,oB,GAMpCA,MAAM,c,GACFA,MAAM,gBAAgBC,IAAI,O,iBAC9B,a,SACiCD,MAAM,oB,GAiB3CA,MAAM,Q,iBAAO,4B,EAGZ,eAEI,SAFD,oBAEH,G,4GAlDV,eAuDM,MAvDN,EAuDM,CAtDJ,eAqDM,MArDN,EAqDM,CApDJ,eAmDM,MAnDN,EAmDM,CAlDJ,EAGA,EAIA,eAkCO,OAlCP,EAkCO,CAhC+B,EAAAE,OAAOC,Y,iBAA3C,eAGM,MAHN,EAAuD,8F,sBAIvD,eAQM,MARN,EAQM,CAPJ,eAKC,QALD,EAKC,C,EAHa,EAAAD,OAAOE,Y,iBAAnB,eAEC,OAFD,EACG,oC,uCAGL,eAAkE,SAA3DC,KAAK,QAAQC,YAAY,gB,qDAAyB,EAAAC,MAAK,K,mBAAL,EAAAA,WAE3D,eAaM,MAbN,EAaM,CAZJ,eAKC,QALD,EAKC,C,EAHa,EAAAL,OAAOM,e,iBAAnB,eAEC,OAFD,EACG,+B,uCAGL,eAKE,SAJAH,KAAK,WACLC,YAAY,WACZG,aAAW,I,qDACF,EAAAC,SAAQ,K,mBAAR,EAAAA,cAGb,eAIE,SAHAC,MAAM,UACNX,MAAM,kBACL,QAAK,+BAAE,EAAAY,MAAM,EAAAL,MAAO,EAAAG,gBAGzB,eAOI,IAPJ,EAOI,C,EALF,eAIc,GAJDG,GAAG,aAAW,C,WACzB,iBAEI,CAFJ,M,8DC/CNC,EAAMC,kDAEG,GACPH,MADO,SACDI,GAAa,0JACvBC,QAAQC,IAAIJ,GACZG,QAAQC,IAAR,UAAeJ,EAAf,iBAFuB,SAGLK,IAAMC,KAAN,UAAcN,EAAd,gBAAiCE,GAH5B,OAGjBK,EAHiB,OAKvBC,aAAaC,QAAQ,aAAcC,KAAKC,UAAUJ,EAAIK,KAAK,gBAE3DJ,aAAaC,QAAQ,OAAQC,KAAKC,UAAUJ,EAAIK,KAAKC,OAP9B,+CD4DV,GACbC,KAAM,QACNF,KAAM,WACJ,MAAO,CACLnB,MAAO,GACPG,SAAU,GACVR,OAAQ,CACNC,YAAY,EACZC,YAAY,EACZI,eAAe,KAIrBqB,QAAS,CACDjB,MADC,SACKL,EAAOG,GAAU,8JACvB,EAAKoB,aACDd,EAAc,CAAET,QAAOG,YAC7BqB,EAAanB,MAAMI,GAChBgB,MAAK,WAIF,UADAR,KAAKS,MAAMX,aAAaY,QAAQ,SAASC,KAAKC,cAG9C,EAAKC,QAAQC,KAAK,CAAEV,KAAM,UACvB,EAAKS,QAAQC,KAAK,CAAEV,KAAM,YAEhCW,OAAM,SAAAC,GAEL,EAAKtC,OAAOC,YAAa,MAfJ,8CAmB7B2B,SApBO,WA+BL,MAVkB,IAAdW,KAAKlC,MACPkC,KAAKrC,YAAa,EAElBqC,KAAKvC,OAAOE,YAAa,EAEN,IAAjBqC,KAAK/B,SACP+B,KAAKvC,OAAOM,eAAgB,EAE5BiC,KAAKvC,OAAOM,eAAgB,GAE1BiC,KAAKvC,OAAOE,aAAcqC,KAAKvC,OAAOM,gBAO9CkC,QAnDa,WAoDPlB,KAAKS,MAAMX,aAAaY,QAAQ,gBAElCO,KAAKJ,QAAQC,KAAK,CAAEV,KAAM,W,UElHlC,EAAOe,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-18d1169c.b2a5a435.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=1640891d&scoped=true&lang=css\"","<template>\r\n  <div class=\"login\">\r\n    <div class=\"container\">\r\n      <div class=\"card form-container\">\r\n        <h1 class=\"large text-dark\">\r\n          Sign In\r\n        </h1>\r\n        <p class=\"lead\">\r\n          <i class=\"fas fa-user\"></i>\r\n          Sign into your account\r\n        </p>\r\n        <form class=\"form\">\r\n          <!--Alert-->\r\n          <div class=\"alert alert-text\" v-if=\"errors.loginError\">\r\n            The email address and password you entered did not match our\r\n            records. Please try again.\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label class=\"control-label\" for=\"email\"\r\n              >Email\r\n              <span v-if=\"errors.emailError\" class=\"alert alert-text\"\r\n                >Please input your email address</span\r\n              ></label\r\n            >\r\n            <input type=\"email\" placeholder=\"Email Address\" v-model=\"email\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label class=\"control-label\" for=\"pwd\"\r\n              >Password\r\n              <span v-if=\"errors.passwordError\" class=\"alert alert-text\"\r\n                >Please input your password</span\r\n              ></label\r\n            >\r\n            <input\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              min-length=\"6\"\r\n              v-model=\"password\"\r\n            />\r\n          </div>\r\n          <input\r\n            value=\"Sign In\"\r\n            class=\"btn btn-primary\"\r\n            @click=\"login(email, password)\"\r\n          />\r\n        </form>\r\n        <p class=\"my-1\">\r\n          Don't have an account?\r\n          <router-link to=\"/register\">\r\n            <a>\r\n              Register Here.\r\n            </a>\r\n          </router-link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import LoginService from '../services/LoginService';\r\n  import axios from 'axios';\r\n\r\n  const url = process.env.VUE_APP_API_URL;\r\n\r\n  export default {\r\n    name: 'Login',\r\n    data: () => {\r\n      return {\r\n        email: '',\r\n        password: '',\r\n        errors: {\r\n          loginError: false,\r\n          emailError: false,\r\n          passwordError: false\r\n        }\r\n      };\r\n    },\r\n    methods: {\r\n      async login(email, password) {\r\n        if (this.validate()) {\r\n          const credentials = { email, password };\r\n          LoginService.login(credentials)\r\n            .then(() => {\r\n              //console.log('login done.');\r\n              if (\r\n                JSON.parse(localStorage.getItem('user')).role.toLowerCase() ===\r\n                'admin'\r\n              )\r\n                this.$router.push({ name: 'Admin' });\r\n              else this.$router.push({ name: 'Home' });\r\n            })\r\n            .catch(err => {\r\n              //console.log(`login failed with ERROR: ${err.response.data.msg}`);\r\n              this.errors.loginError = true;\r\n            });\r\n        }\r\n      },\r\n      validate() {\r\n        if (this.email == '') {\r\n          this.emailError = true;\r\n        } else {\r\n          this.errors.emailError = false;\r\n        }\r\n        if (this.password == '') {\r\n          this.errors.passwordError = true;\r\n        } else {\r\n          this.errors.passwordError = false;\r\n        }\r\n        if (this.errors.emailError || this.errors.passwordError) {\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      if (JSON.parse(localStorage.getItem('auth-token'))) {\r\n        // if logged in\r\n        this.$router.push({ name: 'Home' });\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .alert-text {\r\n    padding-top: 0;\r\n  }\r\n  router-link {\r\n    style: none;\r\n  }\r\n</style>\r\n","import axios from 'axios';\r\n\r\nconst url = process.env.VUE_APP_API_URL;\r\n\r\nexport default {\r\n  async login(credentials) {\r\n    console.log(url)\r\n    console.log(`${url}/users/login`);\r\n    const res = await axios.post(`${url}/users/login`, credentials);\r\n    // store JWT to localstorage\r\n    localStorage.setItem('auth-token', JSON.stringify(res.data['auth-token']));\r\n    // store user object to localstorage\r\n    localStorage.setItem('user', JSON.stringify(res.data.user));\r\n  },\r\n};\r\n","import { render } from \"./Login.vue?vue&type=template&id=1640891d&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=1640891d&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-1640891d\"\n\nexport default script"],"sourceRoot":""}